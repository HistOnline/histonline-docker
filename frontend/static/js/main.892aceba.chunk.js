(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e,t,n){e.exports=n.p+"static/media/logo_eosina.adf244a1.png"},5314:function(e,t,n){e.exports=n(5439)},5319:function(e,t,n){},5437:function(e,t,n){},5439:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(32),i=n.n(r),c=(n(5319),n(10)),l=n(13),s=n(15),u=n(14),m=n(16),p=n(5442),h=n(5443),f=n(5444),d=n(11),g=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={isempty:!0},n.onChangeFunc=function(e,t){e.className=""===t?"":"filled"},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"placeholder_input"},o.a.createElement("input",{type:this.props.type,id:this.props.id,onChange:this.props.onChange?function(t){e.props.onChange(t),e.onChangeFunc(t.target,t.target.value)}:null,className:this.state.inputClass}),o.a.createElement("label",{htmlFor:this.props.id},this.props.placeholder))}}]),t}(a.Component),v=n(84),b=n.n(v),E=n(25),w=n.n(E),x=function(e){var t,n=Object(a.useState)(null),r=Object(d.a)(n,2),i=r[0],c=r[1],l=Object(a.useState)(null),s=Object(d.a)(l,2),u=s[0],m=s[1],p=Object(a.useState)(e.error),h=Object(d.a)(p,2),f=h[0],v=h[1];return o.a.createElement("section",{id:"loginPage"},o.a.createElement("div",{className:"login_box"},o.a.createElement("header",{className:"App-header"},o.a.createElement("img",{alt:"Logo HistOnline",src:b.a})),o.a.createElement("section",null,o.a.createElement(g,{type:"text",placeholder:"Digite seu usu\xe1rio ou email",id:"usuario",onChange:function(e){return c(e.target.value)}}),o.a.createElement(g,{type:"password",placeholder:"Digite sua senha",id:"senha",onChange:function(e){return m(e.target.value)}}),o.a.createElement("div",{className:"alignRight"},o.a.createElement("button",{type:"submit",onClick:function(){w.a.post("".concat("http://histonline.ics.ufba.br/adm/index.php/wp-json","/users/v1/auth"),{user:i,pass:u}).then(function(e){var t=e.data.hash;console.log(t),t&&localStorage.setItem("histonline_token",t),t&&(window.location.href="./")}).catch(function(e){console.log("Erro de login:",e),v("Usu\xe1rio ou senha incorretos")})}},"Entrar"))),o.a.createElement("p",null,"Breve um atlas digital para voc\xea!")),o.a.createElement("div",{className:"whatsthis just_desktop"},o.a.createElement("h3",null,"O que \xe9 isso?"),o.a.createElement("br",null),o.a.createElement("span",null,"Descri\xe7\xe3o da l\xe2mina com curiosidades e principais caracter\xedsticas em foco.")),f?(t=f,console.log("Aviso:",t),o.a.createElement("div",{id:"aviso"},t)):null)},O=function(e){var t=e.children,n=Object(a.useState)(!0),r=Object(d.a)(n,2),i=r[0],c=r[1],l=Object(a.useState)(!1),s=Object(d.a)(l,2),u=s[0],m=s[1];return Object(a.useEffect)(function(){if(console.log(localStorage.getItem("histonline_token")),localStorage.getItem("histonline_token")){var e=localStorage.getItem("histonline_token");w.a.post("".concat("http://histonline.ics.ufba.br/adm/index.php/wp-json","/users/v1/vhash"),{hash:e}).then(function(e){c(!1),m(!0)}).catch(function(e){console.log("Erro de autentica\xe7\xe3o:",e),c(!1),m(!1)})}else c(!1),m(!1)},[]),i?"Carregando...":u?t:o.a.createElement(x,{error:"Voc\xea precisa logar para acessar o sistema"})},j=n(41),y=n(5441),S=n(86),k=n.n(S),C=n(38),N=n(88),_=n.n(N),A=n(87),B=n.n(A),W=n(29),I=n.n(W),L=n(89),D=n.n(L),M=function e(){Object(c.a)(this,e)};M.get=function(e){return e?w()("".concat("http://histonline.ics.ufba.br/adm/index.php/wp-json","/laminas/v1/laminas/").concat(e)):(console.log("chamou"),w()("".concat("http://histonline.ics.ufba.br/adm/index.php/wp-json","/laminas/v1/laminas")))};var z=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).mapSearch=function(e,t){var a=n.state.search.toLowerCase();if(e.categoria.nome.toLowerCase().includes(a))return o.a.createElement("div",null,o.a.createElement(I.a,{className:"category_title_list"},e.categoria.nome),e.laminas.map(function(e){return o.a.createElement(I.a,{button:!0},o.a.createElement(y.a,{to:"/laminas/".concat(e.slug)},e.nome))}));var r=[];return e.laminas.forEach(function(e){e.nome.toLowerCase().includes(a)&&r.push(e)}),console.log(r),r.length?o.a.createElement("div",null,o.a.createElement(I.a,{className:"category_title_list"},e.categoria.nome),r.map(function(e){return o.a.createElement(I.a,{button:!0},o.a.createElement(y.a,{to:"/laminas/".concat(e.slug)},e.nome))})):void 0},n.changeSearchInputValue=function(e){n.setState({search:e.target.value})},n.state={menuIsVisible:!1,toggleMenuVisibility:function(){return n.state.menuIsVisible?n.setState({menuIsVisible:!1}):n.setState({menuIsVisible:!0})},search:"",nav:[{categoria:{nome:"Assunto XYZ",id:1},laminas:[{nome:"Lamina 1",id:1},{nome:"Lamina 2",id:2}]},{categoria:{nome:"Assunto HJK",id:1},laminas:[{nome:"Lamina 7",id:1},{nome:"Lamina 20",id:2}]}]},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;M.get().then(function(t){var n=t.data,a=[];n.map(function(e){a.push({categoria:{ID:e.ID,nome:e.nome},laminas:Object(j.a)(e.laminas)})}),e.setState({nav:a})})}},{key:"render",value:function(){return o.a.createElement("aside",{className:"".concat(this.props.className," ").concat(this.state.menuIsVisible?"opened":"closed")},o.a.createElement(k.a,{id:"main_menu_bt",className:"just_mobile",onClick:this.state.toggleMenuVisibility},o.a.createElement(C.b,null)),o.a.createElement("nav",null,o.a.createElement(B.a,{component:"ul",subheader:o.a.createElement(_.a,{component:"div"},"Selecione um assunto")},o.a.createElement(I.a,null,o.a.createElement(D.a,{placeholder:"Pesquisa",value:this.state.search,onChange:this.changeSearchInputValue})),this.state.nav.map(this.mapSearch))))}}]),t}(a.Component),R=n(28),V=n.n(R),F=function(){return o.a.createElement("footer",{id:"main"},o.a.createElement("div",null,o.a.createElement("img",{src:"/img/ufba_pb.jpg"})),o.a.createElement("div",null,o.a.createElement("img",{src:"/img/ics_colorido.png"})),o.a.createElement("div",null,o.a.createElement("p",null,"Instituto de Ci\xeancias da Sa\xfade",o.a.createElement("br",null),"Universidade Federal da Bahia",o.a.createElement("br",null),"Av. Reitor Miguel Calmon s/n \u2013 Vale do Canela",o.a.createElement("br",null),"CEP 40.110-100",o.a.createElement("br",null),"Salvador, Bahia, Brasil",o.a.createElement("br",null),"Tel.: (71) 3283-8885",o.a.createElement("br",null),"E-mail - ",o.a.createElement("a",{href:"mailto:ics@ufba.br"},"ics@ufba.br"),o.a.createElement("br",null))),o.a.createElement("div",{className:"credits"},"Desenvolvido por Filipe Rocha Lopes sob Orienta\xe7\xe3o de Dr. Alexandre"))},T=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={visibility:!1,className:""},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.className;return o.a.createElement(O,null,o.a.createElement("main",null,o.a.createElement(z,{className:"".concat(e)}),o.a.createElement("section",{id:"page",className:"wrap ".concat(e)},o.a.createElement("section",{className:"first_col ".concat(e)},o.a.createElement("img",{src:V.a,className:"logo"}),o.a.createElement("br",null),"Bem vindo ao HistOnline, selecione uma das l\xe2minas no menu lateral para come\xe7ar"))),o.a.createElement(F,null))}}]),t}(a.Component),J=n(93),P=n(18),H=n(19);function q(){var e=Object(P.a)(["\n  /* position: ","; */\n  top: ",";\n  left: ",";\n  width: ",";\n  height: ",";\n  animation: ",";\n\n  @keyframes open{\n    0% {\n      position: relative;\n    };\n    1% {\n      position: absolute;\n      top: ",";\n      left: ",";\n      width: ",";\n      height: ",";\n    };\n    100% {\n      position: absolute;\n      z-index: 99;\n      top:0;\n      left:0;\n      width: 100vw;\n      height: 100vh;\n    }\n  }\n\n  @keyframes close{\n    0% {\n      position: absolute;\n      top:0;\n      left:0;\n      width: 100vw;\n      height: 100vh;\n    };\n    99% {\n      position:absolute;\n      top: ",";\n      left: ",";\n      width: ",";\n      height: ",";\n    };\n    100% {\n      position: relative;\n    }\n  }\n"]);return q=function(){return e},e}var U=H.a.section(q(),function(e){return e.fullScreen?"absolute":"relative"},function(e){var t=e.fullScreen,n=e.top;return t?"".concat(n,"px"):"auto"},function(e){var t=e.fullScreen,n=e.left;return t?"".concat(n,"px"):"auto"},function(e){var t=e.fullScreen,n=e.width;return t?"".concat(n,"px"):"auto"},function(e){var t=e.fullScreen,n=e.height;return t?"".concat(n,"px"):"auto"},function(e){var t=e.fullScreen,n=e.virgin;return t?"open .6s ease-in-out forwards":n?"none":"close .6s ease-in-out forwards"},function(e){var t=e.top;return"".concat(t,"px")},function(e){var t=e.left;return"".concat(t,"px")},function(e){var t=e.width;return"".concat(t,"px")},function(e){var t=e.height;return"".concat(t,"px")},function(e){var t=e.top;return"".concat(t,"px")},function(e){var t=e.left;return"".concat(t,"px")},function(e){var t=e.width;return"".concat(t,"px")},function(e){var t=e.height;return"".concat(t,"px")});function $(){var e=Object(P.a)(["\n  position: relative;\n  width: 95%;\n  margin: 0 auto;\n  display: inline-block;\n  background: blue;\n  border-radius: 5px;\n  box-shadow: 0 2px 3px rgba(0,0,0,0.2);\n\n  #microscope_imgs{\n      width: 100%;\n      position: relative;\n  }\n\n  img, .svg_mask{\n      display: block;\n      width: 100%;\n  }\n\n  .svg_mask{\n      position: absolute;\n      width: 100%;\n      top: 0;\n      left: 0;\n\n      svg{\n          width: 100%;\n          height: 100%;\n      }\n  }\n\n  .zoom{\n      position: absolute;\n      width: 15%;\n      height: 10%;\n      border: 2px solid #000;\n      cursor: zoom-in;\n\n      &:hover{\n          border-color: #fff;\n      }\n\n      span{\n          position: absolute;\n          top: -20px;\n          left: 5px;\n      }\n  }\n\n  button{\n    position: absolute;\n    bottom: 15px;\n    right: 15px;\n    z-index: 20;\n  }\n"]);return $=function(){return e},e}function K(){var e=Object(P.a)(["\n  z-index: 2;\n  transition: .5s all;\n  opacity: ",";\n  \n  svg{\n    path{\n      stroke: "," !important;\n      stroke-width: 1px !important;\n      fill: "," !important;\n    }\n  }\n"]);return K=function(){return e},e}var Q=H.a.div(K(),function(e){return e.status?1:0},function(e){var t=e.color;return t||"#000"},function(e){var t=e.color;return t?"".concat(t,"33"):"#00000033"}),X=H.a.div($()),Y=o.a.createContext(),Z=function(){var e=Object(a.useContext)(Y),t=e.lamina,n=t.mascaras,r=Object(a.useState)([]),i=Object(d.a)(r,2),c=i[0],l=i[1];Object(a.useEffect)(function(){var e;(e=n,Promise.all((e||[]).map(function(e){var t=e.vector;return fetch(t).then(function(e){return e.text()}).catch(function(e){return console.log("Erro:",e)})}))).then(function(e){l(e)})},[n]);var s=!!n.length&&!!c.length;return o.a.createElement(X,null,t&&o.a.createElement("div",{id:"microscope_imgs"},o.a.createElement("img",{alt:"",src:t.imagem[0]}),s&&n.map(function(t,n){var a=t.color,r=(t.id,t.alias),i=c[n];return i?o.a.createElement(Q,{key:r,status:e.masksByAlias[r].status,dangerouslySetInnerHTML:{__html:i},className:"svg_mask",color:a}):o.a.createElement("span",null,"Carregando...")}),o.a.createElement("button",{onClick:function(t){return e.toggleFullScreen()}},"Modo tela cheia")))};function G(){var e=Object(P.a)(["\n  position: relative;\n  cursor: pointer;\n  display: inline-block;\n  font-weight: bold;\n  color: ",";\n  background: ",";\n  padding: 0 5px;\n  border-radius: 2px;\n  margin: 0 3px;\n  \n  div{\n    position: absolute;\n    font-size: 12px;\n    background: ",";\n    width: 200px;\n    min-height: 100px;\n    top: 20px;\n    left: 0;\n    padding: 3px;\n    padding-bottom: 20px;\n    border-radius: 0 2px 2px 2px;\n    box-shadow: 4px 4px 3px rgba(0,0,0,0.2);\n    z-index: 2;\n\n    &::after{\n      content: 'clique para visualizar';\n      opacity: 0.5;\n      position: absolute;\n      font-size: 10px;\n      bottom: 4px;\n      left: 55px;\n      z-index: 3;\n    }\n  }\n"]);return G=function(){return e},e}var ee=H.a.div(G(),function(e){return e.light?"#000":"#fff"},function(e){return e.color},function(e){return e.color});function te(e){var t,n,a;return e.match(/^rgb/)?(t=(e=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/))[1],n=e[2],a=e[3]):(t=(e=+("0x"+e.slice(1).replace(e.length<5&&/./g,"$&$&")))>>16,n=e>>8&255,a=255&e),Math.sqrt(t*t*.299+n*n*.587+a*a*.114)>127.5?"light":"dark"}var ne=function(e){var t=e.alias,n=Object(a.useState)(!1),r=Object(d.a)(n,2),i=r[0],c=r[1],l=Object(a.useContext)(Y),s=l.masksByAlias[t];console.log("color",l.masksByAlias,"'".concat(t,"'"),l.masksByAlias["".concat(t)],p);var u=s.title,m=s.description,p=s.color;return console.log("color",te(p)),o.a.createElement(ee,{color:p,light:"light"===te(p),onClick:function(e){return l.toggleMaskStatus(t)},onMouseOver:function(e){return c(!0)},onMouseOut:function(e){return c(!1)}},u,i&&o.a.createElement("div",null,m))};function ae(){var e=Object(P.a)(["\n\n  h1{\n    padding-top: 20px;\n    line-height: 20px;\n    font-size: 25px;\n  }\n\n  h4{\n    font-size: 16px;\n    line-height: 14px;\n    color: #737373;      \n  }\n"]);return ae=function(){return e},e}var oe=H.a.section(ae()),re=function(e){var t=e.lamina;Object(a.useContext)(Y);return o.a.createElement(oe,null,o.a.createElement("h1",null,t.nome),o.a.createElement("h4",null,t.coloracao," - ",t.aumento,"x"),o.a.createElement("p",null,function(e){var n=t.mascaras,a=[],r=[];n&&n.map(function(t){var n=t.alias,a=new RegExp(" @".concat(n," "),"gi"),o=e.match(a);console.log("matches",o,a),o&&o.map(function(t){var n=t.replace(/ /gi,"");n=n.replace("@",""),e=e.replace(t,"{{{".concat(n,"}}}"))})}),(a=Object(j.a)(e.matchAll(/\{\{\{\w+\}\}\}/gi))).forEach(function(e,t,n){var a=e[0].replace(/\{\{\{/,"").replace(/\}\}\}/,"");n[t]=a}),r=e.split(/\{\{\{\w+\}\}\}/gi);var i=[];return r.map(function(e,t){i.push(e),a[t]&&i.push(o.a.createElement(ne,{alias:a[t]}))}),i}(t.descricao)))},ie=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).contentWrap=o.a.createRef(),n.start=null,n.state={lamina:null,masksByAlias:{},setMaskStatus:function(e,t){var a=JSON.parse(JSON.stringify(n.state.masksByAlias));a[e].status=t,n.setState({masksByAlias:a})},toggleMaskStatus:function(e){var t=JSON.parse(JSON.stringify(n.state.masksByAlias));t[e].status=!t[e].status,n.setState({masksByAlias:t})},virgin:!0,fullScreen:!1,toggleFullScreen:function(){console.log("prevOffsetTop",n.contentWrap.current.offsetTop),console.log("prevOffsetLeft",n.contentWrap.current.offsetLeft),console.log("PrevWidth",n.contentWrap.current.getBoundingClientRect().width),console.log("prevHeight",n.contentWrap.current.getBoundingClientRect().height),n.state.fullScreen?n.setState({virgin:!1,fullScreen:!1}):n.setState({virgin:!1,fullScreen:!0,contentStyles:{top:n.contentWrap.current.offsetTop,left:n.contentWrap.current.offsetLeft,width:n.contentWrap.current.getBoundingClientRect().width,height:n.contentWrap.current.getBoundingClientRect().height}})},contentStyles:{top:0,left:0,width:0,height:0}},n.animationStep=function(e){n.start||(n.start=e);var t=500+n.start,a=(e-n.start)/(t-n.start),o=window.innerWidth,r=(window.innerHeight,n.state.contentStyles),i=r.top,c=(r.left,r.width);r.height;console.log(n.contentWrap.current,n.contentWrap.current.style,"".concat(c+(o-c)*a,"px !important")),n.contentWrap.current.style.top="".concat(i-i*a,"px !important"),e<t?window.requestAnimationFrame(n.animationStep):n.start=null},n.loadData=function(){var e=n.props.match.params.slug;M.get(e).then(function(e){var t=e.data,a={};t.mascaras.map(function(e){a[e.alias]=Object(J.a)({},e,{status:!1})}),n.setState({lamina:t,masksByAlias:a})}).catch(function(e){return console.log("Erro ao obter l\xe2mina:",e)})},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.slug!==e.match.params.slug&&this.loadData()}},{key:"render",value:function(){var e=this.state.lamina;return o.a.createElement("div",null,o.a.createElement(O,null,o.a.createElement("main",null,o.a.createElement(z,null),o.a.createElement("section",{id:"page",className:"wrap"},o.a.createElement(Y.Provider,{value:this.state},e?[o.a.createElement("img",{alt:"Logo",src:V.a,className:"logo"}),o.a.createElement(U,{ref:this.contentWrap,virgin:this.state.virgin,fullScreen:this.state.fullScreen,top:this.state.contentStyles.top,left:this.state.contentStyles.left,width:this.state.contentStyles.width,height:this.state.contentStyles.height},o.a.createElement(Z,{lamina:e}),o.a.createElement("span",{className:"scroll_message"},o.a.createElement(C.a,null)," Role a p\xe1gina para mais informa\xe7\xf5es"),o.a.createElement(re,{lamina:e}))]:"Carregando..."))),o.a.createElement(F,null)))}}]),t}(a.Component);ie.contexType=Y;var ce=function(e){return Object(a.useEffect)(function(){console.log(e)},[]),o.a.createElement("div",null,o.a.createElement(O,null,o.a.createElement("main",null,o.a.createElement(z,null),o.a.createElement("section",{id:"page",className:"wrap"},o.a.createElement("img",{src:V.a,className:"logo"}),o.a.createElement("h3",null,"Erro 404"),"P\xe1gina n\xe3o encontrada")),o.a.createElement(F,null)))},le=(n(5437),function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(p.a,null,o.a.createElement("div",null,o.a.createElement(h.a,null,o.a.createElement(f.a,{exact:!0,path:"/",component:T}),o.a.createElement(f.a,{exact:!0,path:"/login",component:x}),o.a.createElement(f.a,{exact:!0,path:"/laminas/:slug",component:ie}),o.a.createElement(f.a,{component:ce}))))}}]),t}(a.Component)),se=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ue(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(o.a.createElement(le,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");se?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ue(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):ue(e)})}}()},84:function(e,t,n){e.exports=n.p+"static/media/logo_white.607d8d39.png"}},[[5314,1,2]]]);
//# sourceMappingURL=main.892aceba.chunk.js.map